# Data.gov.ua wrapper v.1.0

Программа предназначена дла предоставления api по аналогии с ресурсом **data.gov.ua** для его подмены, если отправляемые ему запросы возвращаются с ошибкой.

Настройка программы выполняется с помощью файла конфигурации *config.ini* и передачей аргументов в командной строке.

Состав файлов и папок:

- **/files**. Папка в которой собраны файлы данных. Эта папка может содержать вложенные папки, если есть необходимость;
- **/ssl**. Папка в которой могут быть размещены файлы key.pem и cert.pem если сервер должен использовать протокол https;
- **config.ini** - файл конфигурации;
- **wrapper.py** - выполняемый Python-файл;
- **readme.md** - этот файл.

## Файл конфигурации

Файл конфигурации содержит обязательные разделы параметров:

- **server**. Общие данные используемые сервером;
- **proxies**. Настройка proxy;
- **packages**. Значения локальных идентификаторов ресурсов для api-key наборов данных **data.gov.ua** *;
- **files**. Названия файлов для локальных идентификаторов ресурсов.

\* значение локального идентификатора ресурса может начинаться с символа '@', это означает что оставшаяся часть значения соответствует названию раздела файла конфигурации, в котором собраны имена и локальные идентификаторы сложного набора данных (например, govua12).

Параметры раздела **"server"**:

- **address**. Локальный адрес сервера;
- **domain**. Название домена, используемое при формировании URL для ссылки на загружаемый файл;
- **port**. Номер порта сервера;
- **main_package_url**. URL для получения информации о наборе данных (обычно *"https://data.gov.ua/api/3/action/package_show?id={id}*");
- **main_resource_url**. URL для получения информации о ревизиях ресурса (обычно *"https://data.gov.ua/api/3/action/resource_show?id={id}*");
- **https**. Признак использования протокола https (true/false);
- **revisionDate**. Дата в ISO-формате, которая соответствует дате ревизии для всех предоставляемых файлов данных;
- **path**. Путь к расположению локальных папок */files* и */ssl*. Если путь пустой, или не задан, проверяется значение параметра **env_var**;
- **env_var**. Имя переменной окружения, в которой записан путь по умолчанию (см. **path**). Обычно ***env_var=OTP_TEMP***;
- **env_var_append_wrapper**'. Признак (true/false) того, что к пути, записанному в переменной окружения, добавляется */wrapper*.

Параметры раздела **proxies**

- **http**. Строка идентифицирующая proxy-сервер для протокола http. Формат \<server>:\<port>;
- **https**. Строка идентифицирующая proxy-сервер для протокола https. Формат \<server>:\<port>.

## Аргументы командной строки

Аргументы командной строки определяют значения параметров конфигурации и  задаются в формате *section.name=value*, где section - это имя раздела файла конфигурации, name - имя параметра и value - значение (например, server.port=8120).
Аргументы командной строки применяются к ранее загруженному файлу конфигурации, поэтому являются доминирующими.
