databaseChangeLog:
  - changeSet:
      id: v063
      author: valex
      changes:
        - sql:
            sql: |
              create table sys.job (id int8 generated by default as identity, finished_at timestamp, started_at timestamp, stored_job_id int8, primary key (id));
              create table sys.step (id int8 generated by default as identity, comment text, finished_at timestamp, progress float8, started_at timestamp, status varchar(255), job_id int8, stored_step_id int8, primary key (id));
              create table sys.stored_job (id int8 generated by default as identity, description varchar(255), name varchar(255), primary key (id));
              create table sys.stored_step (id int8 generated by default as identity, is_active boolean, is_skipable boolean, service_name varchar(255), step_order int4, worker_name varchar(255), stored_job_id int8, primary key (id));
              create table sys.stored_step_parameter (stored_step_id int8 not null, value varchar(255), key varchar(255) not null, primary key (stored_step_id, key));
              alter table if exists sys.job add constraint FKkkljwnd95b2y9somj33cji8h9 foreign key (stored_job_id) references sys.stored_job;
              alter table if exists sys.step add constraint FKqdnb57dxgn0twg95syfppqqug foreign key (job_id) references sys.job;
              alter table if exists sys.step add constraint FKdt70disd4n491cjq8j7nx5l0r foreign key (stored_step_id) references sys.stored_step;
              alter table if exists sys.stored_step add constraint FK4il97xrg9as3xmq0fuhj5srrj foreign key (stored_job_id) references sys.stored_job;
              alter table if exists sys.stored_step_parameter add constraint FKhyd2op93hvgn3fneb63ok6kdq foreign key (stored_step_id) references sys.stored_step;
